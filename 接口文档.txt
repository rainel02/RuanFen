# -------------------- 1. 认证 (Auth) --------------------
  /auth/register:
    post:
      tags: [Auth]
      summary: 新用户注册
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                email: { type: string }
                password: { type: string }
      responses:
        201:
          description: 注册成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId: { type: string, format: uuid }
                  username: { type: string }
                  email: { type: string }
        400:
          description: 邮箱已被注册或密码不符合要求
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags: [Auth]
      summary: 用户登录
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                account: 
                  type: string
                  description: 用户名/邮箱
                password: 
                  type: string
      responses:
        200:
          description: 登录成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  token: { type: string, description: JWT }
                  user:
                    type: object
                    properties:
                      userId: { type: string, format: uuid }
                      username: { type: string }
                      role: { type: string, example: user }
        401:
          description: 账户或密码错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/forgot-password:
    post:
      tags: [Auth]
      summary: 忘记密码，请求发送验证码
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: { type: string }
      responses:
        200:
          description: 验证码已发送
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  /auth/reset-password:
    post:
      tags: [Auth]
      summary: 重置密码
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: { type: string }
                verificationCode: { type: string }
                newPassword: { type: string }
      responses:
        200:
          description: 密码重置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  # -------------------- 2. 用户 (Users) --------------------
  /users/me:
    get:
      tags: [Users]
      summary: 获取当前登录用户的详细信息
      responses:
        200:
          description: 用户信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId: { type: string, format: uuid }
                  username: { type: string }
                  email: { type: string }
                  certificationStatus: 
                    type: string
                    enum: [not_certified, pending, certified]
                  preferences: { type: object }
    put:
      tags: [Users]
      summary: 更新当前登录用户的个人信息
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                email: { type: string }
                preferences: { type: object }
      responses:
        200:
          description: 更新成功
          content:
            application/json:
              schema:
                type: object # 简化表示
                description: 更新后的用户信息

  /users/me/certification:
    post:
      tags: [Users]
      summary: 提交学者认证申请
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                realName: { type: string }
                organization: { type: string }
                orgEmail: { type: string }
                title: { type: string }
                proofMaterials: 
                  type: array
                  items: { type: string, format: uri }
      responses:
        202:
          description: 认证已提交
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: { type: string }
                  status: { type: string, example: pending }
        400:
          description: 材料不符合要求
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      tags: [Users]
      summary: 查看自己的认证申请状态
      responses:
        200:
          description: 申请状态
          content:
            application/json:
              schema:
                type: object
                properties:
                  status: { type: string, enum: [pending, certified, rejected] }
                  reason: { type: string, description: 如果被驳回的原因 }

  /users/me/appeal:
    post:
      tags: [Users]
      summary: 针对身份冒用或成果冒领发起申诉
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                appealType: { type: string, enum: [identity_stolen, achievement_stolen] }
                targetId: { type: string, description: 被申诉的学者或成果ID }
                reason: { type: string }
                evidenceMaterials:
                  type: array
                  items: { type: string }
      responses:
        202:
          description: 申诉已提交
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: { type: string }
                  caseId: { type: string, format: uuid }
        400:
          description: 必填信息缺失
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # -------------------- 3. 学者门户 (Scholars) --------------------
  /scholars:
    get:
      tags: [Scholars]
      summary: 检索学者门户
      security: []
      parameters:
        - name: name
          in: query
          schema: { type: string }
        - name: organization
          in: query
          schema: { type: string }
        - name: field
          in: query
          schema: { type: string }
      responses:
        200:
          description: 检索结果
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        scholarId: { type: string, format: uuid }
                        name: { type: string }
                        organization: { type: string }
                        title: { type: string }
                        avatarUrl: { type: string }
                  total: { type: integer }
        404:
          description: 未找到相关学者
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /scholars/{id}:
    get:
      tags: [Scholars]
      summary: 浏览特定学者的公开门户主页
      security: []
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
      responses:
        200:
          description: 学者详情
          content:
            application/json:
              schema:
                type: object
                properties:
                  scholarId: { type: string, format: uuid }
                  name: { type: string }
                  organization: { type: string }
                  bio: { type: string }
                  researchFields: { type: array, items: { type: string } }
                  achievements: { type: array, items: { type: object } }
        404:
          description: 该学者暂未开通门户
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /scholars/{id}/collaboration-network:
    get:
      tags: [Scholars]
      summary: 查看学者合作关系网络
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
      responses:
        200:
          description: 图表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  nodes: { type: array, items: { type: object } }
                  links: { type: array, items: { type: object } }
        403:
          description: 该学者合作网络不可见
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

# -------------------- 7. 管理员 (Admin) --------------------
  /admin/certifications:
    get:
      tags: [Admin]
      summary: 获取待审核的学者认证列表
      parameters:
        - name: status
          in: query
          schema: { type: string, example: pending }
      responses:
        200:
          description: 列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  applications: { type: array, items: { type: object } }

  /admin/certifications/{appId}/approve:
    post:
      tags: [Admin]
      summary: 批准学者认证
      parameters:
        - name: appId
          in: path
          required: true
          schema: { type: string }
      responses:
        200:
          description: 认证已批准
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  /admin/certifications/{appId}/reject:
    post:
      tags: [Admin]
      summary: 驳回学者认证
      parameters:
        - name: appId
          in: path
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason: { type: string }
      responses:
        200:
          description: 认证已驳回
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  /admin/appeals:
    get:
      tags: [Admin]
      summary: 获取待处理的申诉列表
      parameters:
        - name: status
          in: query
          schema: { type: string, example: pending }
      responses:
        200:
          description: 列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  appeals: { type: array, items: { type: object } }

  /admin/appeals/{caseId}/process:
    post:
      tags: [Admin]
      summary: 处理申诉（批准或驳回）
      parameters:
        - name: caseId
          in: path
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                action: { type: string, enum: [approve, reject] }
                reason: { type: string }
      responses:
        200:
          description: 申诉已处理
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  /admin/achievements/pending:
    get:
      tags: [Admin]
      summary: 获取待审核的学者提交成果
      responses:
        200:
          description: 列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  pendingAchievements: { type: array, items: { type: object } }

  /admin/achievements/{achId}/approve:
    post:
      tags: [Admin]
      summary: 批准学者提交的成果
      parameters:
        - name: achId
          in: path
          required: true
          schema: { type: string }
      responses:
        200:
          description: 成果已批准
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  /admin/achievements/{achId}/reject:
    post:
      tags: [Admin]
      summary: 驳回学者提交的成果
      parameters:
        - name: achId
          in: path
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason: { type: string }
      responses:
        200:
          description: 成果已驳回
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'

  /admin/tasks:
    get:
      tags: [Admin]
      summary: 查看所有定时任务
      responses:
        200:
          description: 任务列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      type: object
                      properties:
                        taskId: { type: string }
                        name: { type: string }
                        cron: { type: string }
                        status: { type: string }
                        lastRun: { type: string }

  /admin/tasks/{taskId}:
    put:
      tags: [Admin]
      summary: 配置定时任务
      parameters:
        - name: taskId
          in: path
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cron: { type: string }
                status: { type: string, enum: [enabled, disabled] }
                params: { type: object }
      responses:
        200:
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                description: 更新后的任务

  /admin/tasks/{taskId}/run:
    post:
      tags: [Admin]
      summary: 手动触发一次任务
      parameters:
        - name: taskId
          in: path
          required: true
          schema: { type: string }
      responses:
        202:
          description: 任务已加入执行队列
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessMessage'